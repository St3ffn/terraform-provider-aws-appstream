---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "awsappstream_fleet Resource - AWS AppStream"
subcategory: ""
description: |-
  Manages an AppStream fleet. A fleet defines the compute capacity, networking configuration, and runtime behavior for streaming instances that host AppStream user sessions.
---

# awsappstream_fleet (Resource)

Manages an AppStream fleet. A fleet defines the compute capacity, networking configuration, and runtime behavior for streaming instances that host AppStream user sessions.

## Example Usage

```terraform
# minimal fleet
resource "awsappstream_fleet" "minimal" {
  name          = "minimal-fleet"
  fleet_type    = "ON_DEMAND"
  image_name    = "example-image"
  instance_type = "stream.standard.small"

  compute_capacity {
    desired_instances = 1
  }
}

# full fleet
resource "awsappstream_fleet" "full" {
  name       = "always-on-engineering-fleet"
  fleet_type = "ALWAYS_ON"

  image_name    = "appstream-windows-2022-engineering"
  instance_type = "stream.standard.large"

  display_name = "Engineering Always-On Fleet"
  description  = "Always-on AppStream fleet for engineering workloads"

  compute_capacity {
    desired_instances = 5
  }

  vpc_config {
    subnet_ids = [
      "subnet-0a1234567890abcd1",
      "subnet-0b1234567890abcd2",
    ]

    security_group_ids = [
      "sg-0123456789abcdef0",
    ]
  }

  max_user_duration_in_seconds       = 28800 # 8 hours
  disconnect_timeout_in_seconds      = 900   # 15 minutes
  idle_disconnect_timeout_in_seconds = 1800  # 30 minutes

  enable_default_internet_access = true

  iam_role_arn = "arn:aws:iam::123456789012:role/AppStreamFleetRole"

  stream_view = "DESKTOP"
  platform    = "WINDOWS_SERVER_2022"

  domain_join_info {
    directory_name                         = "corp.example.com"
    organizational_unit_distinguished_name = "OU=AppStream,OU=Computers,DC=corp,DC=example,DC=com"
  }

  root_volume_config {
    volume_size_in_gb = 250
  }

  usb_device_filter_strings = [
    "USB\\VID_046D&PID_C52B,*,*,*,*,*,1,0",
    "USB\\VID_0781&PID_558A,*,*,*,*,*,1,1",
  ]

  tags = {
    Environment = "production"
    Team        = "engineering"
    ManagedBy   = "terraform"
  }
}
```

```terraform
# always on fleet - single session
resource "awsappstream_fleet" "always_on_single_session" {
  name       = "always-on-single-session"
  fleet_type = "ALWAYS_ON"

  image_name    = "example-appstream-image"
  instance_type = "stream.standard.medium"

  compute_capacity {
    desired_instances = 2
  }

  display_name = "Always-On Single-Session Fleet"
}

# always on fleet - multi session
resource "awsappstream_fleet" "always_on_multi_session" {
  name       = "always-on-multi-session"
  fleet_type = "ALWAYS_ON"

  image_name    = "example-appstream-image"
  instance_type = "stream.standard.large"

  compute_capacity {
    desired_sessions = 30
  }

  max_sessions_per_instance = 5

  display_name = "Always-On Multi-Session Fleet"
}
```

```terraform
# elastic fleet
resource "awsappstream_fleet" "elastic" {
  name       = "elastic-fleet"
  fleet_type = "ELASTIC"

  image_name    = "example-elastic-image"
  instance_type = "stream.standard.large"

  max_concurrent_sessions = 100

  vpc_config {
    subnet_ids = [
      "subnet-0123456789abcdef0",
      "subnet-0fedcba9876543210",
    ]
  }

  display_name = "Elastic Fleet"
}
```

```terraform
# on demand fleet - single session
resource "awsappstream_fleet" "on_demand_single_session" {
  name       = "on-demand-single-session"
  fleet_type = "ON_DEMAND"

  image_name    = "example-appstream-image"
  instance_type = "stream.standard.medium"

  compute_capacity {
    desired_instances = 2
  }

  display_name = "On-Demand Single-Session Fleet"
}

# on demand fleet - multi session
resource "awsappstream_fleet" "on_demand_multi_session" {
  name       = "on-demand-multi-session"
  fleet_type = "ON_DEMAND"

  image_name    = "example-appstream-image"
  instance_type = "stream.standard.large"

  compute_capacity {
    desired_sessions = 20
  }

  max_sessions_per_instance = 4

  display_name = "On-Demand Multi-Session Fleet"
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `fleet_type` (String) The fleet type. Valid values are `ON_DEMAND`, `ALWAYS_ON`, or `ELASTIC`.
- `instance_type` (String) The EC2 instance type used by the fleet. This field is required for non-elastic fleets.
- `name` (String) The name of the AppStream fleet. Changing this value forces the fleet to be replaced.

### Optional

- `compute_capacity` (Attributes) Specifies the desired capacity for the fleet. Exactly one of `desired_instances` or `desired_sessions` must be specified for non-elastic fleets. These attributes are mutually exclusive. (see [below for nested schema](#nestedatt--compute_capacity))
- `description` (String) The fleet description, if set.
- `disconnect_timeout_in_seconds` (Number) The amount of time that a disconnected session is allowed to remain active.
- `display_name` (String) The name displayed to users in the AppStream user interface.
- `domain_join_info` (Attributes) Specifies the Active Directory domain and organizational unit used to join fleet instances to a Microsoft Active Directory domain. This configuration is not supported for elastic fleets. (see [below for nested schema](#nestedatt--domain_join_info))
- `enable_default_internet_access` (Boolean) Whether instances in the fleet have access to the internet.
- `iam_role_arn` (String) The ARN of the IAM role applied to fleet instances.
- `idle_disconnect_timeout_in_seconds` (Number) The amount of time, in seconds, that a session can remain idle before being disconnected. Specify `0` to disable idle disconnection. Otherwise, the value must be a multiple of 60 seconds between 60 and 36000 to avoid AWS rounding behavior.
- `image_arn` (String) The ARN of the AppStream image used to create the fleet. Either `image_name` or `image_arn` must be specified.
- `image_name` (String) The name of the AppStream image used to create the fleet. Either `image_name` or `image_arn` must be specified.
- `max_concurrent_sessions` (Number) The maximum number of concurrent streaming sessions for an elastic fleet. This setting is required for elastic fleets and is not allowed for other fleet types.
- `max_sessions_per_instance` (Number) The maximum number of user sessions allowed per fleet instance. This setting applies only to multi-session fleets.
- `max_user_duration_in_seconds` (Number) The maximum length of time that a streaming session can remain active.
- `platform` (String) The platform of the fleet. This attribute is optional and primarily used for elastic fleets. If not specified, the platform is inferred from the image.
- `root_volume_config` (Attributes) Specifies the root volume configuration for fleet instances. (see [below for nested schema](#nestedatt--root_volume_config))
- `session_script_s3_location` (Attributes) Specifies the S3 location of the session scripts configuration ZIP file. This setting applies only to elastic fleets. (see [below for nested schema](#nestedatt--session_script_s3_location))
- `stream_view` (String) Controls which streaming protocol views are enabled.
- `tags` (Map of String) A map of tags assigned to the AppStream fleet.
- `usb_device_filter_strings` (Set of String) Defines which USB devices can be redirected to streaming sessions when using the Windows native client. This setting is supported only for Windows fleets. For non-Windows platforms or non-native clients, this configuration is accepted by AWS but ignored at runtime.
- `vpc_config` (Attributes) The VPC configuration used by the fleet. This block is required for elastic fleets. (see [below for nested schema](#nestedatt--vpc_config))

### Read-Only

- `arn` (String) The Amazon Resource Name (ARN) of the AppStream fleet.
- `created_time` (String) The timestamp when the fleet was created, in RFC 3339 format.
- `fleet_errors` (Attributes Set) Informational list of errors reported by AWS for the fleet. These errors do not affect Terraform lifecycle behavior. (see [below for nested schema](#nestedatt--fleet_errors))
- `id` (String) A synthetic identifier for the fleet, equal to the fleet name. This value is managed by the provider and cannot be set manually.
- `state` (String) The state of the AppStream fleet.

<a id="nestedatt--compute_capacity"></a>
### Nested Schema for `compute_capacity`

Optional:

- `desired_instances` (Number) The desired number of streaming instances for a single-session fleet.
- `desired_sessions` (Number) The desired number of concurrent streaming sessions for a multi-session fleet.


<a id="nestedatt--domain_join_info"></a>
### Nested Schema for `domain_join_info`

Required:

- `directory_name` (String) The fully qualified domain name of the Active Directory.

Optional:

- `organizational_unit_distinguished_name` (String) The distinguished name of the organizational unit for computer accounts.


<a id="nestedatt--root_volume_config"></a>
### Nested Schema for `root_volume_config`

Optional:

- `volume_size_in_gb` (Number) The size of the root volume, in GiB.


<a id="nestedatt--session_script_s3_location"></a>
### Nested Schema for `session_script_s3_location`

Required:

- `s3_bucket` (String) The name of the S3 bucket.
- `s3_key` (String) The S3 object key of the session script.


<a id="nestedatt--vpc_config"></a>
### Nested Schema for `vpc_config`

Required:

- `subnet_ids` (Set of String) The subnet IDs for the fleet. This attribute is required for elastic fleets. Elastic fleets require at least two subnets in different Availability Zones. The Availability Zone requirement is enforced by AWS.

Optional:

- `security_group_ids` (Set of String) The security group IDs associated with the fleet.


<a id="nestedatt--fleet_errors"></a>
### Nested Schema for `fleet_errors`

Read-Only:

- `error_code` (String) The error code reported by AWS for the fleet.
- `error_message` (String) The human-readable error message reported by AWS.

## Import

Import is supported using the following syntax:

The [`terraform import` command](https://developer.hashicorp.com/terraform/cli/commands/import) can be used, for example:

```shell
terraform import awsappstream_fleet.example "example-fleet-name"
```
